---
title: IMessage
---

El servicio `IMessage` no contiene una implementación en la librería `CodeDesignPlus.Net.PubSub`, ya que es responsabilidad del cliente implementar este servicio para publicar eventos en un broker externo como RabbitMQ, Kafka o RedisPubSub.

Este servicio estandariaza la forma en que se publican los eventos de dominio en la aplicación, permitiendo que el cliente pueda cambiar el broker de eventos sin tener que modificar la lógica de publicación de eventos.

```csharp url="packages/CodeDesignPlus.Net.PubSub/src/CodeDesignPlus.Net.PubSub.Abstractions/IMessage.cs"
```

## Métodos
---

Los métodos que se pueden utilizar con la interfaz `IMessage` son los siguientes:

### PublishAsync
**Type:** `Task PublishAsync(IDomainEvent @event, CancellationToken cancellationToken)`

Publica un evento de dominio de forma asíncrona.

### PublishAsync
**Type:** `Task PublishAsync(IReadOnlyList<IDomainEvent> @event, CancellationToken cancellationToken)`

Publica una lista de eventos de dominio de forma asíncrona.

### SubscribeAsync
**Type:** `Task SubscribeAsync<TEvent, TEventHandler>(CancellationToken cancellationToken)`

Es invocado al iniciar la aplicación para que el cliente pueda suscribirse a eventos de dominio.

### UnsubscribeAsync
**Type:** `Task UnsubscribeAsync<TEvent, TEventHandler>(CancellationToken cancellationToken)`

Es invocado al detener la aplicación para que el cliente pueda desuscribirse de eventos de dominio.

## Ejemplo de Uso
---

Para ver la forma en que se implementa el servicio `IMessage` en un broker de eventos como RabbitMQ, Kafka o RedisPubSub, puedes consultar la documentación de la librería que implementa el servicio de mensajería. Sin embargo, la siguiente implementación de RabbitMQ muestra cómo se puede implementar el servicio `IMessage` para publicar eventos en RabbitMQ.

```csharp url="packages/CodeDesignPlus.Net.RabbitMQ/src/CodeDesignPlus.Net.RabbitMQ/Services/RabbitPubSubService.cs"
```
