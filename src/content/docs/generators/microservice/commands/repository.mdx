---
title: "Creación de Repositorio"
---

import { Aside, Steps, Tabs, TabItem, FileTree, LinkCard } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';

**Command:** `yo codedesignplus:microservice repository`

Este comando se utiliza para crear un repositorio para un agregado específico dentro de un microservicio existente. En el contexto de Domain-Driven Design (DDD), un repositorio proporciona una interfaz para acceder a los datos persistentes de un agregado, abstrayendo la lógica de acceso a datos de la lógica de negocio. Este comando facilita la generación de la estructura básica para definir un repositorio en tu microservicio.

## Prerrequisitos

- Instalar [Node.js](https://nodejs.org/es) y [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) instalados.
- Instalar [Yeoman](https://yeoman.io/) (`npm install -g yo`).
- Instalar el generador [`codedesignplus:microservice`](/generators).
- Tener un microservicio existente creado con:
    - CRUD: [`codedesignplus:microservice`](/generators/microservice/commands/microservice-crud) 
    - Custom: [`codedesignplus:microservice`](/generators/microservice/commands/microservice-custom).
- Tener un agregado definido en tu microservicio.

## Conceptos Clave

*   **Repositorio (Repository):** En DDD, un repositorio es una interfaz que proporciona una forma de acceder a los datos persistentes de un agregado.
*   **Abstracción de la Persistencia:** Los repositorios abstraen la lógica de acceso a datos (por ejemplo, base de datos, archivos, APIs externas) de la lógica de negocio, permitiendo que la aplicación sea más flexible y fácil de mantener.
*   **Agregado:** Un repositorio se crea para un agregado específico y solo debe interactuar con ese agregado.
*   **DDD:** Domain-Driven Design es un enfoque de desarrollo de software que modela el software alrededor del dominio del negocio. Los repositorios son un patrón clave en DDD.

## Sintaxis del Comando

El comando `yo codedesignplus:microservice repository` tiene la siguiente sintaxis:

<Tabs>
    <TabItem label="Bash">
    ```bash
    yo codedesignplus:microservice repository \
        --organization "<organization_name>" \
        --microservice "<microservice_name>" \
        --repository "<aggregate_name>"
    ```
    </TabItem>
    <TabItem label="PowerShell">
    ```powershell
    yo codedesignplus:microservice repository `
        --organization "<organization_name>" `
        --microservice "<microservice_name>" `
        --repository "<aggregate_name>"
    ```
    </TabItem>
</Tabs>

### `--organization`
    - **Tipo**: `string`
    - **Obligatorio**: Sí
    - **Descripción**: El nombre de la organización a la que pertenece el microservicio.

### `--microservice`
    - **Tipo**: `string`
    - **Obligatorio**: Sí
    - **Descripción**: El nombre del microservicio donde se creará el repositorio.

### `--repository`
    - **Tipo**: `string`
    - **Obligatorio**: Sí
    - **Descripción**: El nombre del agregado para el cual se creará el repositorio.

## Ejemplos de Uso

Este ejemplo crea un repositorio para el agregado `UserProfile` en el microservicio `users` de la organización `acme`.

<Tabs>
    <TabItem label="Bash">
    ```bash
    yo codedesignplus:microservice repository \
        --organization "Acme" \
        --microservice "User" \
        --repository "UserProfile"
    ```
    </TabItem>
    <TabItem label="PowerShell">
    ```powershell
    yo codedesignplus:microservice repository `
        --organization "Acme" `
        --microservice "User" `
        --repository "UserProfile"
    ```
    </TabItem>
</Tabs>

### Salida del comando en consola

Tras ejecutar el comando, se generará la estructura base para el repositorio de `UserProfile` en el microservicio `users`, con la siguiente salida en consola:

<Image src="/images/generators/microservices/repository/result.png" alt="Archetype" width="1600" height="900" decoding="async" loading="lazy" />

### Directorios y Archivos Generados

Si exploramos el microservicio con VS Code, veremos la estructura de directorios y archivos generados para el nuevo repositorio:

<Image src="/images/generators/microservices/repository/vscode.png" alt="Archetype" width="1600" height="900" decoding="async" loading="lazy" />

## Resultados de la Ejecución

La ejecución de este comando con los parámetros proporcionados generará la estructura base para el repositorio del agregado especificado. Veamos los resultados de la ejecución del comando:

### `--organization`
**Flag:** `--organization "acme"`

1. Este parámetro establece el nombre de la organización, que se refleja en los namespaces de los archivos generados para el repositorio.

   <Image src="/images/generators/microservices/repository/1-organization-flag.png" alt="Archetype" width="1600" height="900" decoding="async" loading="lazy" />

### `--microservice`
**Flag:** `--microservice "users"`

1.  Este parámetro establece el nombre del microservicio en el que se creará el repositorio, reflejándose en los namespaces y ubicaciones de los archivos.

    <Image src="/images/generators/microservices/repository/1-microservice-flag.png" alt="Archetype" width="1600" height="900" decoding="async" loading="lazy" />

### `--repository`
**Flag:** `--repository "UserProfile"`

1. Este parámetro define el nombre del repositorio que sera igual al agregado para el repositorio, reflejándose en los nombres de los archivos y las interfaces generadas en las capas de dominio e infraestructura.

    <Image src="/images/generators/microservices/repository/1-repository-flag.png" alt="Archetype" width="1600" height="900" decoding="async" loading="lazy" />

## Consideraciones Adicionales

*   Asegúrate de tener un microservicio existente y un agregado definido antes de utilizar este comando.
*   Un repositorio está asociado a un único agregado.
*   Los repositorios deben encargarse de la persistencia de los agregados, pero deben abstraer la forma de acceso a los datos.
*  Utiliza nombres descriptivos para tus repositorios.

<Aside>
    Es importante tener en cuenta que los repositorios están relacionados con un único agregado. Para este ejemplo, estamos suponiendo que tenemos un agregado adicional llamado <code>UserProfile</code> y estamos procediendo a crearle su repositorio.
</Aside>

## Enlaces Relacionados

*   [Documentación del arquetipo `CodeDesignPlus.Net.Microservice`](../archetypes/)
*   [Documentación del SDK `CodeDesignPlus.Net.SDK`](../libs/introduction)
*   [Conceptos de DDD](https://martinfowler.com/bliki/DomainDrivenDesign.html)
*   [Repositorios en DDD](https://martinfowler.com/eaaCatalog/repository.html)

## Conclusión

El comando `yo codedesignplus:microservice repository` facilita la creación de un repositorio para un agregado específico en tu microservicio, asegurando que la estructura y los patrones DDD se apliquen correctamente. Utiliza este comando para abstraer la lógica de acceso a datos y mantener un diseño coherente en tu aplicación.

